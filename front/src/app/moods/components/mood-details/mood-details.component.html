<app-menu-right-desktop>
    <div class="content_right_desktop">
        <!-- Random Button -->
        <div class="item-top box_buttons">
            <a routerLink="/moods/mood-details/" (click)="getRandomMood()">Random Mood</a>
        </div>
        <!-- Mood Name -->
        <h1 class="item-top" *ngIf="(currentMood$ | async )?.name != '...'">{{ (currentMood$ | async )?.name }}</h1>
        <!-- Mood Description -->
        <div class="box_buttons item-top" *ngIf="(currentMood$ | async )?.description != '...'">
            <h1>{{(currentMood$ | async )?.description}}</h1>
        </div>
        <div *ngIf="userService.appUser.role === 2 || userService.appUser.role === 1">
            <!-- Related Models -->
            <h1 class="item-top">Starring</h1>
            <div class="item-top box_buttons">
                <div *ngFor="let model of modelsByMood">
                    <a routerLink="/models/model-gallery/{{model.businessId}}" (click)="menuService.allMenuTriggerOff()">{{model.pseudonym}}</a>
                </div>
            </div>
            <!-- Related Franchises -->
            <div *ngIf="(franchisesByMood$ | async )?.length">
                <h1 class="item-top">From</h1>
                <div class="item-bottom box_buttons">
                    <div *ngFor="let franchise of (franchisesByMood$ | async )">
                        <a routerLink="/franchises/franchise-gallery/{{franchise.businessId}}">{{franchise.name}}</a>             
                    </div>
                </div>
            </div>
            <!-- Related Artists -->
            <div *ngIf="userService.appUser.role === 2 || userService.appUser.role === 1">
                <h1 class="item-top">Art by</h1>
    
                <div class="item-bottom box_buttons">
                    <div *ngFor="let artist of artistsByMood">
                        <a routerLink="/artists/artist-gallery/{{ artist.businessId }}">{{ artist.name }}</a>
                    </div>  
                </div>
            </div>
        </div>
        <!-- Related Tags -->
        <h1 class="item-top">Tags ( {{ (currentTagsByMood$ | async )?.length }} )</h1>
        <div class="item-bottom list_categories">
            <div *ngFor="let tag of (currentTagsByMood$ | async )">
                <div *ngIf="tag.name === (currentTag$ | async)?.name ">
                    <a class="active" routerLink="/moods/gallery/{{tag.businessId}}">{{tag.name}}</a>
                </div>
                <div *ngIf="tag.name !== (currentTag$ | async)?.name">
                    <a routerLink="/moods/gallery/{{tag.businessId}}">{{tag.name}}</a>
                </div>               
            </div>
        </div>
        <!-- Options -->
        <div class="item-top box_buttons">
            <!-- Focus -->
            <a (click)="toggleFocus()" *ngIf="isFocused === true" class="active" >Toggle Size</a>
            <a (click)="toggleFocus()" *ngIf="isFocused === false">Toggle Size</a>
            <!-- Download -->
            <a (click)="openDownload()">Open / Download</a>  
        </div>
        <!-- Diaporama -->
        <h1 class="item-top">Diaporama</h1>
        <div class="item-top box_buttons_flex">
            <a *ngIf="intervalId === undefined" (click)="diaporamaStart()">Play</a>
            <div *ngIf="diaporamaSwitch">                
                <a *ngIf="intervalId !== undefined" (click)="diaporamaStop()">Stop</a>    
            </div>
            <a *ngIf="intervalId === undefined" (click)="diaporamaRStart()">Play</a>
            <div *ngIf="!diaporamaSwitch">                
                <a *ngIf="intervalId !== undefined" (click)="diaporamaRStop()">Stop</a>
            </div>
        </div>        
        <!-- Gallery Title -->
        <h1 class="item-top" *ngIf="galleryMode === 'tag'">{{ (currentTag$ | async)?.name }}</h1>        
        <h1 class="item-top" *ngIf="galleryMode === 'artist'">{{ ( currentArtist$ | async)?.name }}</h1>
        <h1 class="item-top" *ngIf="galleryMode === 'model' ">{{ ( currentModel$ | async) }}</h1>
        <h1 class="item-top" *ngIf="galleryMode === 'franchise' ">{{(currentFranchise$ | async)?.name }}</h1>
        <!-- Mood Details -->
        <div class="item-top flex">
            <p><b>Mood</b></p>
            <p>{{ moodIndexPosition | number : '3.0'}} / {{moods.length | number : '3.0'}}</p>
        </div>
        <!-- Mood Type : IMAGE -->
        <div *ngIf="(currentMood$ | async)?.type === 1">
            <div *ngIf="(currentImage$ | async) as currentImage">
                <div class="item-middle flex">
                    <p><b>Size</b></p>
                    <p>{{ currentImage.size | formatSize:2 }}</p>
                </div>
                <div class="item-middle flex">
                    <p><b>Extension</b></p>
                    <p>*.{{ currentImage.extension }}</p>
                </div>
                <div class="item-middle flex">
                    <p><b>Height</b></p>
                    <p>{{ currentImage.height }} pixels</p>
                </div>
                <div class="item-middle flex">
                    <p><b>Width</b></p>
                    <p>{{ currentImage.width }} pixels</p>
                </div>
            </div>
        </div>
        <!-- Mood Type : VIDEO -->
        <div *ngIf="mood.type === 2">
            <div class="item-middle flex">
                <p><b>Size</b></p>
                <p>{{ video.size | formatSize:2 }}</p>
            </div>
            <div class="item-middle flex">
                <p><b>Extension</b></p>
                <p>*.{{ video.extension }}</p>
            </div>
            <div class="item-middle flex">
                <p><b>Height</b></p>
                <p>{{video.height}} pixels</p>
            </div>
            <div class="item-middle flex">
                <p><b>Width</b></p>
                <p>{{video.width}} pixels</p>
            </div>
            <div class="item-middle flex">
                <p><b>Duration</b></p>
                <p>{{video.duration | formatDuration }}</p>
            </div>
        </div>
        <!-- Auditable Info -->
        <div class="item-bottom flex_created">
            <div class="box_created">
                <p>Created :</p>
                <p>{{ (currentMood$ | async)?.created | date : 'MMMM d, y | HH:mm' }}</p>
            </div>
            <div class="box_created">
                <p>Modified :</p>
                <p>{{ (currentMood$ | async)?.modified | date : 'MMMM d, y | HH:mm' }}</p>
            </div>
        </div>
        <!-- Score Settings -->
        <div *ngIf="userService.appUser.role === 2">
            <div class="item-top box-score">
                <button (click)="updateMoodScore(mood.businessId, -10)">-10</button>
                <button (click)="updateMoodScore(mood.businessId, -1)">-1</button>
                <p><b>{{ (currentMood$ | async)?.score | number : '3.0'}}</b></p>
                <button (click)="updateMoodScore(mood.businessId, 1)">+1</button>
                <button (click)="updateMoodScore(mood.businessId, 10)">+10</button>
            </div>
        </div>
        <!-- Mood Settings -->      
        <div *ngIf="userService.appUser.role === 2">    
            <div class="item-top list_categories">
                <span>▸ Mood | Title & Description</span>
                <span>▸ Mood | Tags</span>
                <span>▸ Mood | Artists</span>
                <span>▸ Mood | Models</span>
                <span>▸ Mood | Delete</span>
            </div>
        </div>    
    </div>
</app-menu-right-desktop>

<div id="layout-central"> 
    <!-- // Viewer    -->
    <div id="viewer">
        <div id="mood_content" *ngIf="(currentMood$ | async )?.type === 1">
            <img [ngStyle]="{'height.px' : moodHeight}"
            src="{{environment}}/Content/img_thumbs/{{(currentMood$ | async)?.businessId}}.{{(currentMood$ | async)?.extension}}" />
        </div>
        <div id="mood_content" *ngIf="(currentMood$ | async )?.type === 2">
            <video 
                [ngStyle]="{'height.px': moodHeight}"
                autoplay 
                loop 
                [muted]="true" 
                src="{{environment}}/Content/video/{{mood.businessId}}.{{mood.extension}}" 
                type="video/mp4">
            </video>
        </div>
        <div id="mood_content" *ngIf="(currentMood$ | async)?.type === 4" class="youtube">
            <div *ngIf="(currentVideoYouTube$ | async) as currentVideoYouTube" [innerHTML]="getSafeContent(currentVideoYouTube.url)"></div>
        </div>        
        <div (click)="previousMood()" id="page_previous"></div>
        <div (click)="nextMood()" id="page_next"></div>
    </div> 
</div>